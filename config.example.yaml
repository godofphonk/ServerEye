# ServerEye Agent Configuration Example

server:
  name: "Production Server"
  description: "Main production server"
  secret_key: "srv_your_secret_key_here"

# Redis Streams (для Telegram Bot) - EXISTING
redis:
  address: "localhost:6379"
  password: ""
  db: 0

# HTTP API (для Telegram Bot через HTTPS) - EXISTING
api:
  base_url: "https://api.servereye.dev"
  timeout: "30s"

# Kafka (для Web Platform) - NEW ✨
kafka:
  enabled: false  # Установите true для отправки в Kafka
  brokers:
    - "localhost:9092"
    # - "kafka2:9092"  # Можно добавить несколько брокеров
  topic_prefix: "metrics"  # Топики: metrics.cpu_temperature, metrics.memory, etc.
  compression: "snappy"    # none, gzip, snappy, lz4, zstd
  max_attempts: 3          # Количество попыток отправки
  batch_size: 100          # Размер батча сообщений
  required_acks: 1         # -1 = all, 0 = none, 1 = leader

metrics:
  cpu_temperature: true
  interval: "30s"

logging:
  level: "info"  # debug, info, warn, error
  file: "/var/log/servereye/agent.log"

# ПРИМЕРЫ КОНФИГУРАЦИЙ:

# 1. Только Telegram Bot (текущий вариант)
# redis:
#   address: "localhost:6379"
# kafka:
#   enabled: false

# 2. Только Web Platform (новый вариант)
# redis:
#   address: ""  # Отключаем Redis
# kafka:
#   enabled: true
#   brokers: ["kafka.servereye.dev:9092"]

# 3. Оба варианта (dual protocol)
# redis:
#   address: "localhost:6379"
# kafka:
#   enabled: true
#   brokers: ["kafka.servereye.dev:9092"]

# 4. Через HTTP API + Kafka
# api:
#   base_url: "https://api.servereye.dev"
# kafka:
#   enabled: true
#   brokers: ["kafka.servereye.dev:9092"]
